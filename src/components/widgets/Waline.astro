---
const { path } = Astro.props;

// 您可以将此URL添加到consts.ts中
const SERVER_URL = "https://waline-two-gold.vercel.app";
---

<div class="card bg-base-100 shadow-md border border-base-200 p-4">
  <div id="waline-comment-system"></div>
</div>

<script>
  // @ts-ignore
  import { init } from "https://unpkg.com/@waline/client@v3/dist/waline.js";
  import "https://unpkg.com/@waline/client@v3/dist/waline.css";

  init({
    el: "#waline-comment-system",
    serverURL: "https://waline-two-gold.vercel.app",
    path: window.location.pathname,
    lang: "zh-CN",
    dark: 'html[data-theme="dracula"]', // 适配您的暗色主题
    emoji: ["//unpkg.com/@waline/emojis@1.1.0/weibo", "//unpkg.com/@waline/emojis@1.1.0/bilibili"],
    meta: ["nick", "mail", "link"],
    requiredMeta: ["nick"],
    reaction: true, // 使用默认的反应按钮
  });
</script>

<style>
  /* 适配网站主题的样式 */
  :global(.wl-panel) {
    border-radius: var(--rounded-box, 1rem);
  }

  :global(.wl-btn) {
    border-radius: var(--rounded-btn, 0.5rem);
  }

  :global(.wl-header) {
    border-bottom: 1px solid var(--border-color);
  }
</style>
