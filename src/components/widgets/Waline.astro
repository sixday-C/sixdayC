---
const { path } = Astro.props;
---

<div class="card bg-base-100 shadow-md border border-base-200 p-4">
  <div id="waline"></div>
</div>

<script>
  // @ts-ignore
  import { init } from "https://unpkg.com/@waline/client@v3/dist/waline.js";
  import "https://unpkg.com/@waline/client@v3/dist/waline.css";

  init({
    el: "#waline",
    serverURL: "https://waline-two-gold.vercel.app",
    path: window.location.pathname,
    lang: "zh-CN",
    dark: "html.dark",
    emoji: ["//unpkg.com/@waline/emojis@1.1.0/weibo"],
    meta: ["nick", "mail", "link"],
    requiredMeta: ["nick"],
    reaction: true,
    // 自定义样式
    style: {
      boxShadow: "none",
      borderRadius: "var(--rounded-box, 1rem)",
    },
  });
</script>

<style>
  /* 适配网站主题的样式 */
  :global(.wl-panel) {
    border-radius: var(--rounded-box, 1rem);
  }

  :global(.wl-btn) {
    border-radius: var(--rounded-btn, 0.5rem);
  }

  :global(.wl-header) {
    border-bottom: 1px solid var(--border-color);
  }
</style>
