---
const { path } = Astro.props;
---

<!-- âœ… å¼•å…¥ Waline æ ·å¼ -->
<style>
  @import url("https://unpkg.com/@waline/client@v2/dist/waline.css");

  /* ğŸŒ æ˜äº®ä¸»é¢˜é€‚é… */
  html[data-theme="light"] {
    --waline-bgcolor: #f8fafc;
    --waline-color: #1f2937;
    --waline-border: #e5e7eb;
    --waline-theme-color: #60a5fa;
    --waline-info-bgcolor: #f1f5f9;
    --waline-disabled-bgcolor: #cbd5e1;
  }

  /* ğŸŒ™ æš—é»‘ä¸»é¢˜é€‚é… */
  html[data-theme="dark"] {
    --waline-bgcolor: #1e1e2e;
    --waline-color: #cececd;
    --waline-border: #334155;
    --waline-theme-color: #34d399;
    --waline-info-bgcolor: #2a2a40;
    --waline-disabled-bgcolor: #3f3f46;
  }

  /* ğŸ§© è¯„è®ºè¾“å…¥æ¡†ç¾åŒ– */
  .waline-wrapper .wl-editor textarea {
    width: 100%;
    min-height: 6rem;
    max-height: 16rem;
    padding: 0.75rem 1rem;
    resize: vertical;
    border-radius: 0.75rem;
    background-color: var(--waline-bgcolor);
    border: 1px solid var(--waline-border);
    color: var(--waline-color);
    box-sizing: border-box;
  }

  .waline-wrapper .wl-editor textarea:focus {
    border-color: var(--waline-theme-color);
  }

  .waline-wrapper .wl-editor textarea::placeholder {
    color: var(--waline-color);
    opacity: 0.4;
  }

  .waline-wrapper .wl-avatar {
    border-radius: 9999px;
  }

  .waline-wrapper .wl-content {
    font-size: 1rem;
    line-height: 1.6;
  }

  html[data-theme="dark"] .waline-wrapper .wl-content,
  html[data-theme="dark"] .waline-wrapper .wl-comment-content,
  html[data-theme="dark"] .waline-wrapper .wl-nick,
  html[data-theme="dark"] .waline-wrapper .wl-btn,
  html[data-theme="dark"] .waline-wrapper .wl-icon {
    color: #cececd !important;
  }

  html[data-theme="dark"] .waline-wrapper blockquote {
    color: #bfbfbd !important;
  }

  html[data-theme="dark"] .waline-wrapper .wl-action .wl-icon:hover {
    color: var(--waline-theme-color);
  }

  .waline-wrapper .wl-panel {
    border-radius: 1rem;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.08);
  }
</style>

<!-- âœ… è¯„è®ºæŒ‚è½½åŒº -->
<div class="waline-wrapper max-w-3xl mx-auto px-4 mt-8">
  <div
    id="waline"
    data-path={path}
    class="rounded-xl bg-base-100 p-4 sm:p-6 border border-base-300 shadow-md"
  >
  </div>
</div>

<!-- âœ… Waline åˆå§‹åŒ–è„šæœ¬ -->
<script type="module">
  import { init } from "https://unpkg.com/@waline/client@v2/dist/waline.mjs";

  const el = document.getElementById("waline");
  const path = el?.dataset.path || window.location.pathname;

  init({
    el: "#waline",
    serverURL: "https://www.sixdayc.xyz", // ğŸ§  â† æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ Waline åç«¯åœ°å€
    path: path,
    lang: "zh-CN",
    dark: "html[data-theme='dark']",
    emoji: ["https://unpkg.com/@waline/emojis@1.1.0/weibo"],
  });
</script>
